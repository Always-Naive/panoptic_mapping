<launch>
<!-- ============ Arguments ============ -->
  <!-- Groundtruth -->
  <arg name="ground_truth_pointcloud_file" default="/home/giuliano/mt_ipp_panoptic_mapping/datasets/scannetv2-dvc/scans/scene0587_02/scene0587_02_vh_clean_2.pointcloud.ply"/>
  
  <!-- Source map -->
  <arg name="map_file" default="/home/giuliano/mt_ipp_panoptic_mapping/datasets/scannetv2-dvc/scans/scene0587_02/multi_tsdf.panmap"/>
  
  <!-- Params -->
  <arg name="maximum_distance" default="0.05"/>
  <arg name="evaluate" default="false"/>
  <arg name="compute_coloring" default="false"/>
  <arg name="color_by_max_error" default="false"/>
  <arg name="color_by_mesh_distance" default="false"/>
  <arg name="visualize" default="false"/>
  <arg name="ignore_truncated_points" default="true"/>
  <arg name="is_single_tsdf" default="false"/>
  <arg name="export_mesh" default="false"/>
  <arg name="export_mesh_as_point_cloud" default="true"/>

<!-- ============ Evaluations ============ -->
  <node name="evaluator" pkg="panoptic_mapping_utils" type="single_map_evaluation" output="screen" required="true">
    <param name="map_file" value="$(arg map_file)" /> 
    <param name="ground_truth_pointcloud_file" value="$(arg ground_truth_pointcloud_file)" /> 
    <param name="maximum_distance" value="$(arg maximum_distance)" />     
    <param name="visualize" value="$(arg visualize)" /> 
    <param name="evaluate" value="$(arg evaluate)" /> 
    <param name="compute_coloring" value="$(arg compute_coloring)" /> 
    <param name="color_by_max_error" value="$(arg color_by_max_error)" /> 
    <param name="color_by_mesh_distance" value="$(arg color_by_mesh_distance)" /> 
    <param name="ignore_truncated_points" value="$(arg ignore_truncated_points)" /> 
    <param name="is_single_tsdf" value="$(arg is_single_tsdf)" /> 
    <param name="export_mesh" value="$(arg export_mesh)" />
    <param name="export_mesh_as_point_cloud" value="$(arg export_mesh_as_point_cloud)" />
  </node>
  
  <node type="rviz" name="rviz" pkg="rviz" args="-d $(find panoptic_mapping_utils)/config/evaluate_panmap.rviz" if="$(arg visualize)"/>
  
</launch>
